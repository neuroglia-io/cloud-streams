@namespace CloudStreams.Dashboard.Components
@using System.Text.Json
@typeparam TResource where TResource : class, IResource, new()

<div class="container-fluid">
    <div class="row">
        <table class="table table-striped mb-3">
            <tbody>
                <tr>
                    <td>API Version</td>
                    <td><input type="text" readonly value="@resource?.ApiVersion" required title="The resource's API version" class="form-control" /></td>
                </tr>
                <tr>
                    <td>Kind</td>
                    <td><input type="text" readonly value="@resource?.Kind" required title="The resource's kind" class="form-control" /></td>
                </tr>
                <tr>
                    <td>Name</td>
                    <td><input type="text" readonly value="@resource?.GetName()" required title="The resource's name" class="form-control" /></td>
                </tr>
                @if (resource?.IsNamespaced() == true)
                {
                    <tr>
                        <td>Namespace</td>
                        <td><input type="text" readonly value="@resource?.GetNamespace()" required title="The resource's namespace" class="form-control" /></td>
                    </tr>
                }
                <tr>
                    <td>Created At</td>
                    <td><input type="text" readonly value="@resource?.Metadata.CreationTimestamp?.ToString("R")" required title="The date and time at which the resource has been created" class="form-control" /></td>
                </tr>
                <tr>
                    <td>Generation</td>
                    <td><input type="text" readonly value="@resource?.Metadata.Generation" required title="The resource's spec version" class="form-control" /></td>
                </tr>
                @if (resource?.Metadata.Labels?.Any() == true)
                {
                    <tr>
                        <td>Labels</td>
                        <td>
                            @foreach(var label in resource.Metadata.Labels)
                            {
                                <span class="badge bg-primary text-dark m-1">@label.Key: @label.Value</span>
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@code {

    TResource? resource;
    /// <summary>
    /// Gets/sets the resource to display details about
    /// </summary>
    [Parameter] public TResource? Resource { get; set; }

    /// <inheritdoc/>
    protected override Task OnParametersSetAsync()
    {
        if(this.resource != this.Resource)
        {
            this.resource = this.Resource;
        }
        return base.OnParametersSetAsync();
    }

}
